<!doctype html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org" th:replace="~{common::layout(~{::body/content()},${title})}">

<body>
	<!-- main -->
	<main class="col-10 col-sm px-4 py-4">
		<!--アラート表示-->
		<div class="alert alert-danger" role="alert" th:if="${errorMsg}">
			[[${errorMsg}]]
		</div>
		<!--end of アラート表示-->

		<!-- topic -->
		<h1 class="h2 fw-bold">◆[[${topic}]]</h1>

		<form method="post" th:object="${record}">
			<input type="hidden" name="registerId" th:value="${session.loginNum}">

			<!-- 相談開始時間 -->
			<div class="row my-3">
				<!-- label枠 -->
				<div class="col-sm-2 ms-3 py-2 bg-body-secondary">
					<div class="row">
						<label for="start_at" class="col col-form-label ms-3 fw-bold">相談開始時間</label>

						<div th:replace="~{parts :: requiredLabel}"></div>
					</div>
				</div>
				<!-- end of label枠 -->
				<div class="col-sm-auto ms-3 py-2">
					<input type="datetime-local" class="form-control" id="start_at" th:field="*{startAt}"
						th:value="*{startAt}" readonly>
				</div>
			</div>
			<!-- end of 相談開始時間  -->

			<!-- スタッフ名 -->
			<div class="row mb-3">
				<!-- label枠 -->
				<div class="col-sm-2 ms-3 py-2 bg-body-secondary">
					<div class="row">
						<label for="starff_id" class="col col-form-label ms-3 fw-bold">スタッフ名</label>
						<div th:replace="~{parts :: requiredLabel}"></div>
					</div>
				</div>
				<!-- end of label枠 -->
				<div class="col-sm-auto ms-3 py-2">
					<select class="form-select" id="staff_id" readonly th:field="*{staff.id}">
						<option th:unless="*{staff.id}" value="" disabled selected>選択してください</option>
						<option th:each="staffType : ${staffType}" th:value="${staffType.id}"
							th:text="${staffType.name}"></option>
					</select>
				</div>
			</div>
			<!-- end of スタッフ名 -->

			<!-- 急病者続柄 -->
			<div class="row mb-3">
				<!-- label枠 -->
				<div class="col-sm-2 ms-3 py-2 bg-body-secondary">
					<div class="row">
						<label for="patient_pattern" class="col col-form-label ms-3 fw-bold">急病者 側柄</label>
						<div th:replace="~{parts :: requiredLabel}"></div>

					</div>
				</div>
				<!-- end of label枠 -->
				<div class="col-sm-auto ms-3 py-2">
					<select class="form-select" id="patient_pattern" th:field="*{patient.id}" readonly>
						<option th:unless="*{patient.id}" value="" disabled selected>選択してください</option>

						<option th:each="patientType: ${patientType}" th:value="${patientType.id}"
							th:text="${patientType.attribute}"></option>
					</select>
				</div>
			</div>
			<!-- end of 急病者続柄 -->

			<!-- 症状種別 -->
			<div class="row mb-3">
				<!-- label枠 -->
				<div class="col-sm-2 ms-3 py-2 bg-body-secondary">
					<div class="row">
						<label class="col-form-label ms-3 fw-bold">症状種別</label>
					</div>
				</div>
				<!-- end of label枠 -->
				<div class="col-sm-auto form-check ms-3 py-2">
					<div class="form-check mb-2" th:each=" symptomType : ${symptomType}">
						<input class="form-check-input" type="checkbox" th:field="*{symptoms}"
							th:value="${symptomType.id}" th:id="${symptomType.symptomsName}" onclick="return false;">

						<label class="form-check-label" th:text="${symptomType.symptomsName}"
							th:for="${symptomType.symptomsName}"></label>
					</div>

				</div>
			</div>
			<!-- end of 症状種別 -->

			<!-- 相談内容 -->
			<div class="row mb-3">
				<!-- label枠 -->
				<div class="col-sm-2 ms-3 py-2 bg-body-secondary">
					<div class="row">
						<label th:for="consultation" class="col col-form-label ms-3 fw-bold">相談内容</label>
					</div>
				</div>
				<!-- end of label枠 -->
				<div class="col-sm-auto ms-3 py-2 w-75" style="max-width: 500px;">
					<textarea class="form-control" id="consultation" rows="3" th:field="*{consultation}"
						th:text="*{consultation}" readonly></textarea>
				</div>
			</div>
			<!-- end of 相談内容 -->

			<!-- 対応内容 -->
			<div class="row mb-3">
				<!-- label枠 -->
				<div class="col-sm-2 ms-3 py-2 bg-body-secondary">
					<div class="row">
						<label for="response" class="col col-form-label ms-3 fw-bold">対応内容</label>
					</div>
				</div>
				<!-- end of label枠 -->
				<div class="col-sm-auto ms-3 py-2 w-75" style="max-width: 500px;">
					<textarea class="form-control" id="response" rows="3" th:field="*{response}" th:text="*{response}"
						readonly></textarea>
				</div>
			</div>
			<!-- end of 対応内容 -->

			<!-- 相談終了時間 -->
			<div class="row my-3">
				<!-- label枠 -->
				<div class="col-sm-2 ms-3 py-2 bg-body-secondary">
					<div class="row">
						<label for="end_at" class="col col-form-label ms-3 fw-bold">相談終了時間</label>

						<div th:replace="~{parts :: requiredLabel}"></div>
					</div>
				</div>
				<!-- end of label枠 -->
				<div class="col-sm-auto ms-3 py-2">
					<input type="datetime-local" class="form-control" id="end_at" th:field="*{endAt}"
						th:value="*{endAt}" readonly>
				</div>
			</div>
			<!-- end of 相談終了時間  -->
			<!--  button  -->
			<div class="row">
				<!-- backbutton  -->
				<div class="col-sm-auto">
					<button type="button" class="btn btn-secondary ms-1 mb-3" onclick="history.back()">戻る</button>
				</div>
				<!-- end of backbutton  -->
				<!-- editbutton  -->
				<th:block th:if="${!title.equals('全ての記録') && !title.equals('承認済み')}">
					<div class="col-sm-auto">
						<a th:href="@{edit?id={id}(id=${record.id})}">
							<button type="button" class="btn btn-warning ms-3 mb-3">編集</button>
						</a>
					</div>
				</th:block>
				<!-- end of editbutton  -->
				<!-- permitButton trigger modal -->
				<th:block th:if="${session.loginNum == 2 && record.approvalStatus == null }">
					<div class="col-sm-auto">
						<button type="button" class="btn btn-success ms-3 mb-3" data-bs-toggle="modal"
							data-bs-target="#permitModal">承認</button>
					</div>
				</th:block>
				<!--modal-->
				<!-- Modal -->
				<div class="modal fade" id="permitModal" tabindex="-1" aria-labelledby="permitModalLabel"
					aria-hidden="true">
					<div class="modal-dialog">
						<div class="modal-content">
							<div class="modal-header">
								<h1 class="modal-title fs-5" id="permitModalLabel">承認作業</h1>
								<button type="button" class="btn-close" data-bs-dismiss="modal"
									aria-label="Close"></button>
							</div>
							<div class="modal-body">記録を承認しますか？</div>
							<div class="modal-footer">
								<a th:href="@{remand?id={id}(id=${record.id})}">
									<button type="button" class="btn btn-secondary">差し戻し</button>
								</a>
								<a th:href="@{permit?id={id}(id=${record.id})}">
									<button type="button" class="btn btn-primary">承認</button>
								</a>
							</div>
						</div>
					</div>
				</div>
				<!--end of modal-->
			</div>
			<!-- end of button  -->
		</form>
	</main>
	<!-- main -->
</body>

</html>